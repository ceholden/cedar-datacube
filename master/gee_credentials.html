

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Credentials &mdash; ardzilla 0+untagged.50.g18bde75 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Google Earth Engine Storage" href="gee_storage.html" />
    <link rel="prev" title="Source - Google Earth Engine (GEE)" href="gee.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> ardzilla
          

          
          </a>

          
            
            
              <div class="version">
                0+untagged.50.g18bde75
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="gee.html">Source - Google Earth Engine (GEE)</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Credentials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#google-earth-engine">Google Earth Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="#google-cloud-storage">Google Cloud Storage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">Credentials</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#google-drive">Google Drive</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#developer-access">Developer Access</a></li>
<li class="toctree-l4"><a class="reference internal" href="#user-access">User Access</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#api">API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id2">Google Cloud Storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">Google Drive</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="gee_storage.html">Google Earth Engine Storage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="netcdf4.html">Destination - NetCDF4</a></li>
</ul>
<p class="caption"><span class="caption-text">Help and Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="dev.html">Developer Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ardzilla</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="gee.html">Source - Google Earth Engine (GEE)</a> &raquo;</li>
        
      <li>Credentials</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/ceholden/ardzilla/blob/master/docs/source/gee_credentials.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="credentials">
<span id="gee-creds"></span><h1>Credentials<a class="headerlink" href="#credentials" title="Permalink to this headline">¶</a></h1>
<p>You will need a Google account that has access to both the
Google Earth Engine and the Google Drive API.
Either use Google Drive or Google Cloud Storage.</p>
<div class="section" id="google-earth-engine">
<span id="gee-creds-gee"></span><h2>Google Earth Engine<a class="headerlink" href="#google-earth-engine" title="Permalink to this headline">¶</a></h2>
<p>Get access to GEE.</p>
</div>
<div class="section" id="google-cloud-storage">
<span id="gee-creds-gcs"></span><h2>Google Cloud Storage<a class="headerlink" href="#google-cloud-storage" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>Credentials<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>This application can save to Google Cloud Storage using the
<code class="docutils literal notranslate"><span class="pre">google-cloud-storage</span></code> package.</p>
<p>Follow the instructions provided at the following:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://googleapis.github.io/google-cloud-python/latest/core/auth.html">Python Google Cloud</a> authentication docs</p></li>
<li><p><a class="reference external" href="https://google-auth.readthedocs.io/en/latest/user-guide.html#user-guide">Python Google Auth</a> user guide</p></li>
</ul>
<p>It’s probably going to be easiest to create and use a Service account private
credential file.</p>
<p>Make sure to enable the following Google Cloud Platform services:</p>
<ul class="simple">
<li><p>Cloud Storage</p></li>
<li><p>Google Cloud Storage JSON API</p></li>
</ul>
<p>The “Cloud Storage” service is needed to actually store data, and the JSON API
service is needed by the client libraries we use to interact with the storage
service.</p>
</div>
</div>
<div class="section" id="google-drive">
<span id="gee-creds-gdrive"></span><h2>Google Drive<a class="headerlink" href="#google-drive" title="Permalink to this headline">¶</a></h2>
<div class="section" id="developer-access">
<h3>Developer Access<a class="headerlink" href="#developer-access" title="Permalink to this headline">¶</a></h3>
<p>In order for this application to use the Google Drive API, you need to setup
developer credentials so Google which will allow you to use the Google Drive
API. You can read more about Google’s authentication using <a class="reference external" href="https://developers.google.com/identity/protocols/OAuth2?hl=en_US">OAuth 2.0</a>.</p>
<ol class="arabic simple">
<li><p>Follow the guide to <a class="reference external" href="https://developers.google.com/drive/api/v3/enable-drive-api">Enable the Google Drive API</a>.</p></li>
<li><p>Create “OAuth client ID” credentials for the project. You will want to
use the “Other” choice for the “Application type”.</p></li>
<li><p>Download the credentials as JSON (<code class="docutils literal notranslate"><span class="pre">client_secret.[long</span> <span class="pre">string].json</span></code>)
and rename them to <code class="docutils literal notranslate"><span class="pre">client_secret.json</span></code> or something else that is
easy to remember.</p></li>
<li><p>You can either move this <code class="docutils literal notranslate"><span class="pre">client_secret.json</span></code> file to your working
directory or point to it explicitly inside this application. You will need
to know its location when using <a class="reference internal" href="ardzilla/ardzilla.gee.gauth.html#module-ardzilla.gee.gauth" title="ardzilla.gee.gauth"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ardzilla.gee.gauth</span></code></a>.</p></li>
<li><p>DO NOT SHARE THIS FILE — it ties API calls back to your Google account.</p></li>
</ol>
<p>This step authorizes your Google account to make API calls using this
application, but we still need to give the application authorization to
change data for your Google account.</p>
</div>
<div class="section" id="user-access">
<h3>User Access<a class="headerlink" href="#user-access" title="Permalink to this headline">¶</a></h3>
<p>This step gives our application (“ardzilla”, or whatever you called the
application name when creating the OAuth 2.0 credentials) access to a user’s
Google Drive.</p>
<p>This step will eventually happen inside of the application (likely from a
CLI), but for now is described here using library functions.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">from</span> <span class="nn">ardzilla.gee</span> <span class="kn">import</span> <span class="n">gauth</span>

<span class="gp">In [2]: </span><span class="n">creds</span> <span class="o">=</span> <span class="n">gauth</span><span class="o">.</span><span class="n">get_gdrive_credentials</span><span class="p">(</span><span class="n">client_secrets</span><span class="o">=</span><span class="s1">&#39;client_secret.json&#39;</span><span class="p">)</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">FileNotFoundError</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="mi">84</span><span class="n">b53ee0f2b3</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">creds</span> <span class="o">=</span> <span class="n">gauth</span><span class="o">.</span><span class="n">get_gdrive_credentials</span><span class="p">(</span><span class="n">client_secrets</span><span class="o">=</span><span class="s1">&#39;client_secret.json&#39;</span><span class="p">)</span>

<span class="nn">~/build/ceholden/ardzilla/ardzilla/gee/gauth.py</span> in <span class="ni">get_gdrive_credentials</span><span class="nt">(client_secrets, credentials)</span>
<span class="g g-Whitespace">    </span><span class="mi">133</span>             <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Opening local web server to authenticate..&#39;</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">134</span>             <span class="n">flow</span> <span class="o">=</span> <span class="n">InstalledAppFlow</span><span class="o">.</span><span class="n">from_client_secrets_file</span><span class="p">(</span>
<span class="ne">--&gt; </span><span class="mi">135</span>                 <span class="n">client_secrets_</span><span class="p">,</span> <span class="n">_GDRIVE_SCOPES</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">136</span> 
<span class="g g-Whitespace">    </span><span class="mi">137</span>             <span class="n">flow_kwds</span> <span class="o">=</span> <span class="p">{</span>

<span class="nn">~/miniconda/envs/test_env/lib/python3.7/site-packages/google_auth_oauthlib/flow.py</span> in <span class="ni">from_client_secrets_file</span><span class="nt">(cls, client_secrets_file, scopes, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">169</span>             <span class="n">Flow</span><span class="p">:</span> <span class="n">The</span> <span class="n">constructed</span> <span class="n">Flow</span> <span class="n">instance</span><span class="o">.</span>
<span class="g g-Whitespace">    </span><span class="mi">170</span>         <span class="s2">&quot;&quot;&quot;</span>
<span class="ne">--&gt; </span><span class="mi">171</span><span class="s2">         with open(client_secrets_file, &#39;r&#39;) as json_file:</span>
<span class="g g-Whitespace">    </span><span class="mi">172</span><span class="s2">             client_config = json.load(json_file)</span>
<span class="g g-Whitespace">    </span><span class="mi">173</span><span class="s2"> </span>

<span class="ne">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;client_secret.json&#39;

<span class="gp">In [3]: </span><span class="n">creds</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 ---------------------------------------------------------------------------</span>
<span class="go">NameError                                 Traceback (most recent call last)</span>
<span class="go">&lt;ipython-input-3-a84f66f438be&gt; in &lt;module&gt;</span>
<span class="go">----&gt; 1 creds</span>

<span class="go">NameError: name &#39;creds&#39; is not defined</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id2">
<h3>Google Cloud Storage<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="ardzilla.gee.gauth.build_gcs_client">
<code class="descclassname">ardzilla.gee.gauth.</code><code class="descname">build_gcs_client</code><span class="sig-paren">(</span><em>credentials=None</em>, <em>project=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ardzilla/gee/gauth.html#build_gcs_client"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ardzilla.gee.gauth.build_gcs_client" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a Google Cloud Store API service client</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>credentials</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><em>optional</em>) – File name of Google Cloud Store credentials (typically from a service
account)</p></li>
<li><p><strong>project</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><em>optional</em>) – Google Cloud Platform project to use</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Client for the Google Cloud Storage client library</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>google.cloud.storage.Client</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>You might consider setting the envirnment variable
<code class="docutils literal notranslate"><span class="pre">GOOGLE_APPLICATION_CREDENTIALS</span></code> with the path to your service account
credentials file <a class="reference internal" href="#r508ca13d2747-1" id="id3">[1]</a>.</p>
<p class="rubric">References</p>
<dl class="citation">
<dt class="label" id="r508ca13d2747-1"><span class="brackets"><a class="fn-backref" href="#id3">1</a></span></dt>
<dd><p><a class="reference external" href="https://cloud.google.com/storage/docs/reference/libraries#setting_up_authentication">https://cloud.google.com/storage/docs/reference/libraries#setting_up_authentication</a></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="id4">
<h3>Google Drive<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="ardzilla.gee.gauth.get_gdrive_credentials">
<code class="descclassname">ardzilla.gee.gauth.</code><code class="descname">get_gdrive_credentials</code><span class="sig-paren">(</span><em>client_secrets=None</em>, <em>credentials=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ardzilla/gee/gauth.html#get_gdrive_credentials"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ardzilla.gee.gauth.get_gdrive_credentials" title="Permalink to this definition">¶</a></dt>
<dd><p>Return Google Drive credentials</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>client_secrets</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><em>optional</em>) – Location of “client_secrets.json” used to authenticate a user for the
application. Needed for initially authenticating the user.</p></li>
<li><p><strong>credentails</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><em>optional</em>) – User credentials, including access token, for using the application.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>GDrive v3 API resource</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>googleapiclient.discovery.Resource</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.7/library/exceptions.html#ValueError" title="(in Python v3.7)"><strong>ValueError</strong></a> – Raised if <cite>client_secrets</cite> file is needed but missing</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="ardzilla.gee.gauth.build_gdrive_service">
<code class="descclassname">ardzilla.gee.gauth.</code><code class="descname">build_gdrive_service</code><span class="sig-paren">(</span><em>client_secrets=None</em>, <em>credentials=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ardzilla/gee/gauth.html#build_gdrive_service"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ardzilla.gee.gauth.build_gdrive_service" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a Google Drive API service</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>client_secrets</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><em>optional</em>) – Location of “client_secrets.json” used to authenticate a user for the
application. Needed for initially authenticating the user.</p></li>
<li><p><strong>credentails</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><em>optional</em>) – User credentials, including access token, for using the application.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>GDrive v3 API resource</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>googleapiclient.discovery.Resource</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3.7/library/exceptions.html#ValueError" title="(in Python v3.7)"><strong>ValueError</strong></a> – Raised if service can’t be built</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="gee_storage.html" class="btn btn-neutral float-right" title="Google Earth Engine Storage" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="gee.html" class="btn btn-neutral float-left" title="Source - Google Earth Engine (GEE)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Chris Holden

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>