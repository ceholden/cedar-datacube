

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Credentials &mdash; cedar 0+untagged.51.g62dff70 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Configuration" href="config.html" />
    <link rel="prev" title="Overview" href="overview.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> cedar
          

          
          </a>

          
            
            
              <div class="version">
                0+untagged.51.g62dff70
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Credentials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#google-earth-engine">Google Earth Engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="#google-drive">Google Drive</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#developer-credentials">Developer Credentials</a></li>
<li class="toctree-l3"><a class="reference internal" href="#user-access">User Access</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#google-cloud-storage">Google Cloud Storage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">Credentials</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#api">API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">Google Drive</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">Google Cloud Storage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="submissions.html">Pre-ARD Order Submission</a></li>
<li class="toctree-l1"><a class="reference internal" href="tracking.html">Pre-ARD Order Tracking</a></li>
<li class="toctree-l1"><a class="reference internal" href="download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="convert.html">Pre-ARD to ARD Conversion</a></li>
<li class="toctree-l1"><a class="reference internal" href="cleaning.html">Cleaning pre-ARD from Storage</a></li>
</ul>
<p class="caption"><span class="caption-text">Help and Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Interface Programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="storage.html">Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev.html">Developer Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">cedar</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Credentials</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/ceholden/cedar-datacube/blob/master/docs/source/credentials.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="credentials">
<span id="id1"></span><h1>Credentials<a class="headerlink" href="#credentials" title="Permalink to this headline">¶</a></h1>
<p>You will need a Google account that has access to,</p>
<ul>
<li><p>Google Earth Engine</p></li>
<li><p>PICK ONE OF THE FOLLOWING</p>
<blockquote>
<div><ul class="simple">
<li><p>Google Drive</p></li>
<li><p>Google Cloud Storage</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="section" id="google-earth-engine">
<span id="gee-creds-gee"></span><h2>Google Earth Engine<a class="headerlink" href="#google-earth-engine" title="Permalink to this headline">¶</a></h2>
<p>Get access to Google Earth Engine by <a class="reference external" href="https://earthengine.google.com/signup/">signing up for an account</a>.</p>
</div>
<div class="section" id="google-drive">
<span id="gee-creds-gdrive"></span><h2>Google Drive<a class="headerlink" href="#google-drive" title="Permalink to this headline">¶</a></h2>
<p>Access to the Google Drive requires two steps — developer credentials to allow
the CEDAR application to use the Google Drive API, and user credentials to
give permission for CEDAR to write to your Google Drive.</p>
<div class="section" id="developer-credentials">
<span id="gee-creds-gdrive-dev"></span><h3>Developer Credentials<a class="headerlink" href="#developer-credentials" title="Permalink to this headline">¶</a></h3>
<p>In order for this application to use the Google Drive API, you need to setup
Google Cloud Platform credentials to allow you to use the Google Drive
API. You can read more about Google’s authentication using <a class="reference external" href="https://developers.google.com/identity/protocols/OAuth2?hl=en_US">OAuth 2.0</a>.</p>
<ol class="arabic simple">
<li><p>Follow the guide to <a class="reference external" href="https://developers.google.com/drive/api/v3/enable-drive-api">Enable the Google Drive API</a>.</p></li>
<li><p>Create “OAuth client ID” credentials for the project. You will want to
use the “Other” choice for the “Application type”.</p></li>
<li><p>Download the credentials as JSON (<code class="docutils literal notranslate"><span class="pre">client_secret.[long</span> <span class="pre">string].json</span></code>)
and rename them to <code class="docutils literal notranslate"><span class="pre">client_secret.json</span></code> or something else that is
easy to remember.</p></li>
<li><p>You can either move this <code class="docutils literal notranslate"><span class="pre">client_secret.json</span></code> file to your working
directory or point to it explicitly inside this application. You will need
to know its location when to authenticate.</p></li>
<li><p>The credentials in this file are used to link API calls back to your Google
account. Therefore, it is recommended that you do not share it publicly
to avoid unwanted use of your API quotas.</p></li>
</ol>
<p>This step authorizes your Google account to make API calls using this
application, but we still need to give the application authorization to
change data for your Google account.</p>
</div>
<div class="section" id="user-access">
<h3>User Access<a class="headerlink" href="#user-access" title="Permalink to this headline">¶</a></h3>
<p>This step gives our application (“cedar”, or whatever you called the
application name when creating the OAuth 2.0 credentials) access to a user’s
Google Drive.</p>
<p>Using the command line interface program,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cedar auth gdrive --client_secrets_file<span class="o">=</span>client_secret.json
Please visit this URL to authorize this application: https://accounts.google.com/o/oauth2/auth...
Enter the authorization code: <span class="o">[</span>PASTE AUTHORIZATION CODE<span class="o">]</span>
Authenticated using credentials file ~/.config/cedar/credentials.json
</pre></div>
</div>
</div>
</div>
<div class="section" id="google-cloud-storage">
<span id="gee-creds-gcs"></span><h2>Google Cloud Storage<a class="headerlink" href="#google-cloud-storage" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id2">
<h3>Credentials<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>This application can save to Google Cloud Storage using the
<code class="docutils literal notranslate"><span class="pre">google-cloud-storage</span></code> package.</p>
<p>Follow the instructions provided at the following:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://googleapis.github.io/google-cloud-python/latest/core/auth.html">Python Google Cloud</a> authentication docs</p></li>
<li><p><a class="reference external" href="https://google-auth.readthedocs.io/en/latest/user-guide.html#user-guide">Python Google Auth</a> user guide</p></li>
</ul>
<p>It’s probably going to be easiest to create and use a Service account private
credential file.</p>
<p>Make sure to enable the following Google Cloud Platform services:</p>
<ul class="simple">
<li><p>Cloud Storage</p></li>
<li><p>Google Cloud Storage JSON API</p></li>
</ul>
<p>The “Cloud Storage” service is needed to actually store data, and the JSON API
service is needed by the client libraries we use to interact with the storage
service.</p>
<p>To authenticate, you can use the program <code class="docutils literal notranslate"><span class="pre">cedar</span> <span class="pre">auth</span> <span class="pre">gcs</span></code>. To test logging in,
it might be helpful to specify your service account file and GCS project
explicitly:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cedar auth gcs --service_account_file SERVICE_ACCOUNT.json --project PROJECT
Authenticated using service account file <span class="s2">&quot;SERVICE_ACCOUNT.json&quot;</span> and project <span class="s2">&quot;PROJECT&quot;</span>
Make sure to add this information to the <span class="sb">`</span>gcs<span class="sb">`</span> section of your configuration file
</pre></div>
</div>
<p>For ordering and downloading, you’ll need to put this information in your
configuration file in the <code class="docutils literal notranslate"><span class="pre">gcs</span></code> section. You can also use environment
variables to configure GCS, as described in the <a class="reference external" href="https://google-auth.readthedocs.io/en/latest/reference/google.auth.environment_vars.html">google-auth library docs</a>.</p>
</div>
</div>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id3">
<h3>Google Drive<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="cedar.stores.gdrive.get_credentials">
<code class="sig-prename descclassname">cedar.stores.gdrive.</code><code class="sig-name descname">get_credentials</code><span class="sig-paren">(</span><em class="sig-param">client_secrets_file=None</em>, <em class="sig-param">credentials_file=None</em>, <em class="sig-param">no_browser=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cedar/stores/gdrive.html#get_credentials"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cedar.stores.gdrive.get_credentials" title="Permalink to this definition">¶</a></dt>
<dd><p>Get OAuth2 Credentials for Google Drive</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>client_secrets_file</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><em>Path</em>) – Filename of “client_secrets.[…].json” file</p></li>
<li><p><strong>credentials_file</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><em>Path</em>) – Filename of user credentials to load, or to save to for future use.
If not provided, will use default location.</p></li>
<li><p><strong>no_browser</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a><em>, </em><em>optional</em>) – Disables opening a web browser in favor of prompting user to
authenticate using a terminal prompt.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>credentials</strong> (<em>google.oauth2.credentials.Credentials</em>) – User credentials, including access token, for using the application.</p></li>
<li><p><strong>credentials_file</strong> (<em>str</em>) – File storing user credentials</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="cedar.stores.gdrive.build_gdrive_service">
<code class="sig-prename descclassname">cedar.stores.gdrive.</code><code class="sig-name descname">build_gdrive_service</code><span class="sig-paren">(</span><em class="sig-param">credentials</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cedar/stores/gdrive.html#build_gdrive_service"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cedar.stores.gdrive.build_gdrive_service" title="Permalink to this definition">¶</a></dt>
<dd><p>Return Google Drive API service, either by credentials or file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>credentials</strong> (<em>google.oauth2.credentials.Credentials</em>) – User credentials, including access token, for using the application.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>GDrive v3 API resource</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>googleapiclient.discovery.Resource</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="id4">
<h3>Google Cloud Storage<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="cedar.stores.gcs.build_gcs_client">
<code class="sig-prename descclassname">cedar.stores.gcs.</code><code class="sig-name descname">build_gcs_client</code><span class="sig-paren">(</span><em class="sig-param">credentials=None</em>, <em class="sig-param">project=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cedar/stores/gcs.html#build_gcs_client"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cedar.stores.gcs.build_gcs_client" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a Google Cloud Store API service client</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>credentials</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><em>optional</em>) – File name of Google Cloud Store credentials (typically from a service
account)</p></li>
<li><p><strong>project</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><em>optional</em>) – Google Cloud Platform project to use</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Client for the Google Cloud Storage client library</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>google.cloud.storage.Client</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>You might consider setting the envirnment variable
<code class="docutils literal notranslate"><span class="pre">GOOGLE_APPLICATION_CREDENTIALS</span></code> with the path to your service account
credentials file <a class="reference internal" href="#r27411fe16876-1" id="id5">[1]</a>.</p>
<p class="rubric">References</p>
<dl class="citation">
<dt class="label" id="r27411fe16876-1"><span class="brackets"><a class="fn-backref" href="#id5">1</a></span></dt>
<dd><p><a class="reference external" href="https://cloud.google.com/storage/docs/reference/libraries#setting_up_authentication">https://cloud.google.com/storage/docs/reference/libraries#setting_up_authentication</a></p>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="config.html" class="btn btn-neutral float-right" title="Configuration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="overview.html" class="btn btn-neutral float-left" title="Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Chris Holden

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>